package no.mil.fnse.southbound.model;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.io.PrintWriter;
import java.net.Socket;

import com.fasterxml.jackson.annotation.JsonIgnore;

public class TelnetSession {
	@JsonIgnore
	private Socket telnetSocket;
	
	private String username;
	private String password;
	
	final int PORT = 23;
	Router router;
	boolean isconnected = false;
	

	
	public void connect(){
		try {
			telnetSocket = new Socket(router.getManagementIp(), 23);
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
	}
	
	private void login(){
		
	}
	private void simpleTelnet(){
		
	
			socket.setKeepAlive(true);
			PrintWriter out = new PrintWriter(
					  new BufferedWriter(
					  new OutputStreamWriter(
	     				  socket.getOutputStream())));

		    /* read response */
		    BufferedReader in = new BufferedReader(
					    new InputStreamReader(
					    socket.getInputStream()));

		    String inputLine;
		
		    out.println("cisco");
		    out.flush();
		    
		    out.println("cisco");
		    out.println();
		    out.flush();
			
		    out.println("show run int gi 0/1");
		    out.println();
		    out.flush();
		    /*
		     * Make sure there were no surprises
		     */
		    if (out.checkError())
			System.out.println(
			    "SSLSocketClient:  java.io.PrintWriter error");

		    
		    
		    while ((inputLine = in.readLine()) != null){
		    	System.out.println(inputLine);
		    }
		    System.out.println("Exiting the router");



		    in.close();
		    out.close();
		    socket.close();

		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
	}
}
